webpackJsonp([4],{"9RS1":function(module,__webpack_exports__,__webpack_require__){"use strict";var contentFooter=function(){return __webpack_require__.e(10).then(__webpack_require__.bind(null,"4LSl"))},publicButton=function(){return __webpack_require__.e(11).then(__webpack_require__.bind(null,"NPxM"))},publicPass=function(){return __webpack_require__.e(12).then(__webpack_require__.bind(null,"CR0n"))},publicTips=function(){return __webpack_require__.e(9).then(__webpack_require__.bind(null,"fSaJ"))},walletTransparent=function(){return __webpack_require__.e(14).then(__webpack_require__.bind(null,"VGzS"))},SECUtil=__webpack_require__("96Ie"),CryptoJS=__webpack_require__("Av7u"),dataCenterHandler=__webpack_require__("101K");__webpack_exports__.a={name:"walletEntren",components:{contentFooter:contentFooter,publicButton:publicButton,publicPass:publicPass,publicTips:publicTips,walletTransparent:walletTransparent},props:{},data:function(){return{passVal:"",privateKeyVal:"",KeyStoreUrl:"",showPass:!1,privateKeyError:!1,walletPassError:!1,privateKeyErrorTxt:"walletInfo.invalidPrivateKey",walletPassErrorTxt:"passTips.passError",KeyStoreVal:"walletInfo.checkKeyStore2",radioPages:0,keystoreUnlockBtn:"walletInfo.unlockBtn",keyUnlockBtn:"walletInfo.unlockBtn",radioList:[{id:"0",value:"Keystore",isChecked:!0},{id:"1",value:"walletInfo.privateKey",isChecked:!1}],transparentShow:!1,systemErrorTxt:""}},computed:{keyStoreActive:function(){var e=this.passVal.replace(/\s+/g,"");return e.length>0&&!_const.passReg.test(e)?this.walletPassError=!0:this.walletPassError=!1,!!_const.passReg.test(e)},privateKeyActive:function(){var e=this.privateKeyVal.replace(/\s+/g,"");return e.length>0&&e.length<64?this.privateKeyError=!0:_const.priverKeyReg.test(e)||64!=e.length?this.privateKeyError=!1:this.privateKeyError=!0,!(64!=e.length||!_const.priverKeyReg.test(e))}},created:function(){},mounted:function(){},destroyed:function(){},methods:{passChange:function(){var e=this;this.$nextTick(function(){e.passVal=e.inputNull(e.passVal)})},privateChange:function(){var e=this;this.$nextTick(function(){e.privateKeyVal=e.inputNull(e.privateKeyVal)})},walletInfoForm:function walletInfoForm(){var _this3=this;if(1===this.radioPages){this.keyUnlockBtn="walletInfo.unlockBtns";var privateVal=this.privateKeyVal.replace(/\s+/g,""),privateKeyBuffer=SECUtil.privateToBuffer(privateVal),extractAddress=SECUtil.privateToAddress(privateKeyBuffer).toString("hex"),extractPublicKey=SECUtil.privateToPublic(privateKeyBuffer).toString("hex"),extractPhrase=SECUtil.entropyToMnemonic(privateKeyBuffer),parm=void 0;this._getWalletFromDB(extractAddress,function(e){void 0===e||""===e?(_this3.systemErrorTxt="public.systemError",_this3._keyError()):e.status?(parm={walletAddress:"0x"+extractAddress,privateKey:privateVal,englishWords:extractPhrase,publicKey:extractPublicKey,invitationCode:e.doc[0].invitationCode,ownInvitationCode:e.doc[0].ownInvitationCode,mortgagePoolAddress:e.doc[0].mortgagePoolAddress,ownPoolAddress:e.doc[0].ownPoolAddress,mortgageValue:e.doc[0].mortgageValue,role:e.doc[0].role},_this3.$emit("login",parm),_this3.keyUnlockBtn="walletInfo.unlockBtn"):(_this3.systemErrorTxt="pool.poolInvailidError",_this3._keyError())})}else{var passVal=this.passVal.replace(/\s+/g,"");this.keystoreUnlockBtn="walletInfo.unlockBtns";var that=this;this.$axios.get(""+this.KeyStoreUrl).then(function(response){var jsonstr=response.data,keyData=CryptoJS.AES.decrypt(jsonstr.toString(),passVal).toString(CryptoJS.enc.Utf8);if(200==response.status){var walletData=keyData.split(":{"),arrData1="{"+walletData[1].replace("}}","")+"}",arrData=eval("("+arrData1+")"),_parm=void 0;_this3._getWalletFromDB(arrData.walletAddress,function(e){void 0===e||""===e?(_this3.systemErrorTxt="public.systemError",_this3._keystoreError()):e.status?(_parm={walletAddress:"0x"+arrData.walletAddress,privateKey:arrData.privateKey,englishWords:arrData.englishWords,publicKey:arrData.publicKey,invitationCode:e.doc[0].invitationCode,ownInvitationCode:e.doc[0].ownInvitationCode,mortgagePoolAddress:e.doc[0].mortgagePoolAddress,ownPoolAddress:e.doc[0].ownPoolAddress,mortgageValue:e.doc[0].mortgageValue,role:e.doc[0].role},_this3.$emit("login",_parm),_this3.keystoreUnlockBtn="walletInfo.unlockBtn"):(_this3.systemErrorTxt="pool.poolInvailidError",_this3._keystoreError())})}else _this3.systemErrorTxt="public.systemError",_this3._keystoreError()}).catch(function(e){_this3.systemErrorTxt="passTips.passError",_this3._keystoreError()})}},_keyError:function(){var e=this;this.transparentShow=!0,this.keyUnlockBtn="walletInfo.unlockBtn",setTimeout(function(){e.transparentShow=!1},3e3)},_keystoreError:function(){var e=this;this.transparentShow=!0,this.keystoreUnlockBtn="walletInfo.unlockBtn",setTimeout(function(){e.transparentShow=!1},3e3)},tirggerFile:function(e){var t=e.target.files;1===t.length?(this.KeyStoreUrl=this.getObjectURL(t[0]),this.KeyStoreVal=t[0].name,this.showPass=!0):(this.KeyStoreVal="walletInfo.checkKeyStore2",this.passVal="",this.walletPassError=!1,this.showPass=!1)},checkTab:function(e){this.radioPages=e,this.radioList.forEach(function(e){e.isChecked=!1}),this.radioList[e].isChecked=!0},_getWalletFromDB:function(e,t){dataCenterHandler.findOutWallet({address:e},function(e){t(e)})}}}},EgER:function(e,t,r){"use strict";var a=r("9RS1"),s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"wallet-background"},[r("el-row",[r("el-col",{attrs:{xs:24,sm:24,md:24}},[r("h2",[e._v(e._s(e.$t("walletInfo.accessWallet")))]),e._v(" "),r("section",{staticClass:"radio-arr"},e._l(e.radioList,function(t,a){return r("section",{key:t.id,staticClass:"radio-box"},[r("label",{staticClass:"radio",class:{on:t.isChecked}}),e._v(" "),r("input",{staticClass:"ipt-radio",attrs:{type:"radio"},domProps:{checked:t.isChecked},on:{click:function(t){return e.checkTab(a)}}}),e._v(" "),r("span",[e._v(e._s(e.$t(t.value)))])])}),0),e._v(" "),r("section",{directives:[{name:"show",rawName:"v-show",value:0==e.radioPages,expression:"radioPages == 0"}],staticClass:"key-store"},[r("p",[e._v(e._s(e.$t("walletInfo.checkKeyStore1")))]),e._v(" "),r("input",{attrs:{type:"file",placeholder:e.$t("walletInfo.checkKeyStore2")},on:{change:function(t){return e.tirggerFile(t)}}}),e._v(" "),r("section",[r("span",[e._v(e._s(e.$t(e.KeyStoreVal)))])]),e._v(" "),e.showPass?r("public-pass",{class:e.walletPassError?"error-border":"",attrs:{maxlength:"30",placeholder:e.$t("passTips.passEncryption")},on:{input:e.passChange},model:{value:e.passVal,callback:function(t){e.passVal=t},expression:"passVal"}}):e._e(),e._v(" "),r("public-tips",{directives:[{name:"show",rawName:"v-show",value:e.walletPassError,expression:"walletPassError"}],attrs:{tipsTxt:e.walletPassErrorTxt}}),e._v(" "),r("public-button",{staticClass:"key-store-btn",class:e.keyStoreActive?"btn-active":"",attrs:{disabled:!e.keyStoreActive,text:e.$t(e.keystoreUnlockBtn)},nativeOn:{click:function(t){return e.walletInfoForm(t)}}})],1),e._v(" "),r("section",{directives:[{name:"show",rawName:"v-show",value:1==e.radioPages,expression:"radioPages == 1"}],staticClass:"private-key"},[r("p",[e._v(e._s(e.$t("walletInfo.inputPrivateKey1")))]),e._v(" "),r("public-pass",{class:e.privateKeyError?"error-border":"",attrs:{maxlength:"64",placeholder:e.$t("walletInfo.inputPrivateKey2")},on:{input:e.privateChange},model:{value:e.privateKeyVal,callback:function(t){e.privateKeyVal=t},expression:"privateKeyVal"}}),e._v(" "),r("public-tips",{directives:[{name:"show",rawName:"v-show",value:e.privateKeyError,expression:"privateKeyError"}],attrs:{tipsTxt:e.privateKeyErrorTxt}}),e._v(" "),r("public-button",{staticClass:"private-key-btn",class:e.privateKeyActive?"btn-active":"",attrs:{disabled:!e.privateKeyActive,text:e.$t(e.keyUnlockBtn)},nativeOn:{click:function(t){return e.walletInfoForm(t)}}})],1)])],1),e._v(" "),r("content-footer"),e._v(" "),r("wallet-transparent",{directives:[{name:"show",rawName:"v-show",value:e.transparentShow,expression:"transparentShow"}],attrs:{txt:e.systemErrorTxt}})],1)},staticRenderFns:[]};var n=function(e){r("G6TV")},o=r("VU/8")(a.a,s,!1,n,"data-v-0e85731a",null);t.a=o.exports},G6TV:function(e,t){},Q14E:function(e,t){},cb0b:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),s=r.n(a),n=r("exGp"),o=r.n(n),i=r("EgER"),l=(r("EuP9"),{name:"walletInformation",components:{contentFooter:function(){return r.e(10).then(r.bind(null,"4LSl"))},walletEntren:i.a,infoMask:function(){return r.e(19).then(r.bind(null,"bYBY"))},walletInfo:function(){return r.e(17).then(r.bind(null,"J1Ad"))},walletQrcode:function(){return r.e(20).then(r.bind(null,"Z1ZF"))}},props:{},data:function(){return{infoPages:1,maskShow:!1}},computed:{isLogin:function(){return this.$store.getters.isLogin?this.infoPages=2:this.infopages=1,this.$store.getters.isLogin},walletKey:function(){return this.$store.getters.walletKey},walletAddress:function(){return this.$store.getters.walletAddress},walletWords:function(){return this.$store.getters.englishWords},walletPublicKey:function(){return this.$store.getters.publicKey},inviteCode:function(){return this.$store.getters.inviteCode},walletMoneyC:function(){return this.$store.getters.walletMoneyC},walletMoneyN:function(){return this.$store.getters.walletMoneyN},availableAmount:function(){return this.$store.getters.availibleAmount},freezeAmount:function(){return this.$store.getters.freezeAmount},wallet:function(){return this.$store.getters.wallet}},created:function(){},mounted:function(){},destroyed:function(){this.$store.commit("logoff")},methods:{closeMask:function(){this.maskShow=!1},createdMask:function(){this.maskShow=!0},loginWallet:function(e){var t=this;return o()(s.a.mark(function r(){var a;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.$store.commit("login",e),r.next=3,t.updateWalletBalance(t.wallet);case 3:a=r.sent,t.$store.commit("updateWalletBalance",{walletBalance:a.walletBalance,freezeAmount:a.freezeAmount,availibleAmount:a.availibleAmount,walletBalanceSEN:a.walletBalanceSEN,nonce:a.nonce});case 5:case"end":return r.stop()}},r,t)}))()}}}),c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"el-container"},[e.isLogin?e._e():r("wallet-entren",{on:{login:e.loginWallet}}),e._v(" "),e.isLogin?r("main",{staticClass:"wallet-background"},[r("section",{staticClass:"wallet-info-content"},[r("wallet-info"),e._v(" "),r("wallet-qrcode",{on:{createMask:e.createdMask}})],1),e._v(" "),r("content-footer")],1):e._e(),e._v(" "),r("info-mask",{directives:[{name:"show",rawName:"v-show",value:e.maskShow,expression:"maskShow"}],on:{close:e.closeMask}})],1)},staticRenderFns:[]};var u=r("VU/8")(l,c,!1,function(e){r("Q14E")},"data-v-7ef569f0",null);t.default=u.exports}});