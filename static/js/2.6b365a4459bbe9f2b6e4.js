webpackJsonp([2],{"4nlc":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAABHNCSVQICAgIfAhkiAAAAGNJREFUCJltjrEJgDAURF9SOJdOoJAqVhnNzirw3SAj6QDmLIQgkivfwbtzU1jN4WY6ETq87iGBrk596R6SL7adFaV/XVEqtp0eoOTdhI6vuuTdAHyDbepV9z4xhriMIS5f9gBvNS4IQzqjowAAAABJRU5ErkJggg=="},"9RS1":function(module,__webpack_exports__,__webpack_require__){"use strict";var contentFooter=function(){return __webpack_require__.e(10).then(__webpack_require__.bind(null,"4LSl"))},publicButton=function(){return __webpack_require__.e(11).then(__webpack_require__.bind(null,"NPxM"))},publicPass=function(){return __webpack_require__.e(12).then(__webpack_require__.bind(null,"CR0n"))},publicTips=function(){return __webpack_require__.e(9).then(__webpack_require__.bind(null,"fSaJ"))},walletTransparent=function(){return __webpack_require__.e(15).then(__webpack_require__.bind(null,"VGzS"))},SECUtil=__webpack_require__("96Ie"),CryptoJS=__webpack_require__("Av7u"),dataCenterHandler=__webpack_require__("101K");__webpack_exports__.a={name:"walletEntren",components:{contentFooter:contentFooter,publicButton:publicButton,publicPass:publicPass,publicTips:publicTips,walletTransparent:walletTransparent},props:{},data:function(){return{passVal:"",privateKeyVal:"",KeyStoreUrl:"",showPass:!1,privateKeyError:!1,walletPassError:!1,privateKeyErrorTxt:"walletInfo.invalidPrivateKey",walletPassErrorTxt:"passTips.passError",KeyStoreVal:"walletInfo.checkKeyStore2",radioPages:0,keystoreUnlockBtn:"walletInfo.unlockBtn",keyUnlockBtn:"walletInfo.unlockBtn",radioList:[{id:"0",value:"Keystore",isChecked:!0},{id:"1",value:"walletInfo.privateKey",isChecked:!1}],transparentShow:!1,systemErrorTxt:""}},computed:{keyStoreActive:function(){var e=this.passVal.replace(/\s+/g,"");return e.length>0&&!_const.passReg.test(e)?this.walletPassError=!0:this.walletPassError=!1,!!_const.passReg.test(e)},privateKeyActive:function(){var e=this.privateKeyVal.replace(/\s+/g,"");return e.length>0&&e.length<64?this.privateKeyError=!0:_const.priverKeyReg.test(e)||64!=e.length?this.privateKeyError=!1:this.privateKeyError=!0,!(64!=e.length||!_const.priverKeyReg.test(e))}},created:function(){},mounted:function(){},destroyed:function(){},methods:{passChange:function(){var e=this;this.$nextTick(function(){e.passVal=e.inputNull(e.passVal)})},privateChange:function(){var e=this;this.$nextTick(function(){e.privateKeyVal=e.inputNull(e.privateKeyVal)})},walletInfoForm:function walletInfoForm(){var _this3=this;if(1===this.radioPages){this.keyUnlockBtn="walletInfo.unlockBtns";var privateVal=this.privateKeyVal.replace(/\s+/g,""),privateKeyBuffer=SECUtil.privateToBuffer(privateVal),extractAddress=SECUtil.privateToAddress(privateKeyBuffer).toString("hex"),extractPublicKey=SECUtil.privateToPublic(privateKeyBuffer).toString("hex"),extractPhrase=SECUtil.entropyToMnemonic(privateKeyBuffer),parm=void 0;this._getWalletFromDB(extractAddress,function(e){void 0===e||""===e?(_this3.systemErrorTxt="public.systemError",_this3._keyError()):e.status?(parm={walletAddress:"0x"+extractAddress,privateKey:privateVal,englishWords:extractPhrase,publicKey:extractPublicKey,invitationCode:e.doc[0].invitationCode,ownInvitationCode:e.doc[0].ownInvitationCode,mortgagePoolAddress:e.doc[0].mortgagePoolAddress,ownPoolAddress:e.doc[0].ownPoolAddress,mortgageValue:e.doc[0].mortgageValue,role:e.doc[0].role},_this3.$emit("login",parm),_this3.keyUnlockBtn="walletInfo.unlockBtn"):(_this3.systemErrorTxt="pool.poolInvailidError",_this3._keyError())})}else{var passVal=this.passVal.replace(/\s+/g,"");this.keystoreUnlockBtn="walletInfo.unlockBtns";var that=this;this.$axios.get(""+this.KeyStoreUrl).then(function(response){var jsonstr=response.data,keyData=CryptoJS.AES.decrypt(jsonstr.toString(),passVal).toString(CryptoJS.enc.Utf8);if(200==response.status){var walletData=keyData.split(":{"),arrData1="{"+walletData[1].replace("}}","")+"}",arrData=eval("("+arrData1+")"),_parm=void 0;_this3._getWalletFromDB(arrData.walletAddress,function(e){void 0===e||""===e?(_this3.systemErrorTxt="public.systemError",_this3._keystoreError()):e.status?(_parm={walletAddress:"0x"+arrData.walletAddress,privateKey:arrData.privateKey,englishWords:arrData.englishWords,publicKey:arrData.publicKey,invitationCode:e.doc[0].invitationCode,ownInvitationCode:e.doc[0].ownInvitationCode,mortgagePoolAddress:e.doc[0].mortgagePoolAddress,ownPoolAddress:e.doc[0].ownPoolAddress,mortgageValue:e.doc[0].mortgageValue,role:e.doc[0].role},_this3.$emit("login",_parm),_this3.keystoreUnlockBtn="walletInfo.unlockBtn"):(_this3.systemErrorTxt="pool.poolInvailidError",_this3._keystoreError())})}else _this3.systemErrorTxt="public.systemError",_this3._keystoreError()}).catch(function(e){_this3.systemErrorTxt="passTips.passError",_this3._keystoreError()})}},_keyError:function(){var e=this;this.transparentShow=!0,this.keyUnlockBtn="walletInfo.unlockBtn",setTimeout(function(){e.transparentShow=!1},3e3)},_keystoreError:function(){var e=this;this.transparentShow=!0,this.keystoreUnlockBtn="walletInfo.unlockBtn",setTimeout(function(){e.transparentShow=!1},3e3)},tirggerFile:function(e){var t=e.target.files;1===t.length?(this.KeyStoreUrl=this.getObjectURL(t[0]),this.KeyStoreVal=t[0].name,this.showPass=!0):(this.KeyStoreVal="walletInfo.checkKeyStore2",this.passVal="",this.walletPassError=!1,this.showPass=!1)},checkTab:function(e){this.radioPages=e,this.radioList.forEach(function(e){e.isChecked=!1}),this.radioList[e].isChecked=!0},_getWalletFromDB:function(e,t){dataCenterHandler.findOutWallet({address:e},function(e){t(e)})}}}},AkFF:function(e,t){},EgER:function(e,t,r){"use strict";var n=r("9RS1"),a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"wallet-background"},[r("el-row",[r("el-col",{attrs:{xs:24,sm:24,md:24}},[r("h2",[e._v(e._s(e.$t("walletInfo.accessWallet")))]),e._v(" "),r("section",{staticClass:"radio-arr"},e._l(e.radioList,function(t,n){return r("section",{key:t.id,staticClass:"radio-box"},[r("label",{staticClass:"radio",class:{on:t.isChecked}}),e._v(" "),r("input",{staticClass:"ipt-radio",attrs:{type:"radio"},domProps:{checked:t.isChecked},on:{click:function(t){return e.checkTab(n)}}}),e._v(" "),r("span",[e._v(e._s(e.$t(t.value)))])])}),0),e._v(" "),r("section",{directives:[{name:"show",rawName:"v-show",value:0==e.radioPages,expression:"radioPages == 0"}],staticClass:"key-store"},[r("p",[e._v(e._s(e.$t("walletInfo.checkKeyStore1")))]),e._v(" "),r("input",{attrs:{type:"file",placeholder:e.$t("walletInfo.checkKeyStore2")},on:{change:function(t){return e.tirggerFile(t)}}}),e._v(" "),r("section",[r("span",[e._v(e._s(e.$t(e.KeyStoreVal)))])]),e._v(" "),e.showPass?r("public-pass",{class:e.walletPassError?"error-border":"",attrs:{maxlength:"30",placeholder:e.$t("passTips.passEncryption")},on:{input:e.passChange},model:{value:e.passVal,callback:function(t){e.passVal=t},expression:"passVal"}}):e._e(),e._v(" "),r("public-tips",{directives:[{name:"show",rawName:"v-show",value:e.walletPassError,expression:"walletPassError"}],attrs:{tipsTxt:e.walletPassErrorTxt}}),e._v(" "),r("public-button",{staticClass:"key-store-btn",class:e.keyStoreActive?"btn-active":"",attrs:{disabled:!e.keyStoreActive,text:e.$t(e.keystoreUnlockBtn)},nativeOn:{click:function(t){return e.walletInfoForm(t)}}})],1),e._v(" "),r("section",{directives:[{name:"show",rawName:"v-show",value:1==e.radioPages,expression:"radioPages == 1"}],staticClass:"private-key"},[r("p",[e._v(e._s(e.$t("walletInfo.inputPrivateKey1")))]),e._v(" "),r("public-pass",{class:e.privateKeyError?"error-border":"",attrs:{maxlength:"64",placeholder:e.$t("walletInfo.inputPrivateKey2")},on:{input:e.privateChange},model:{value:e.privateKeyVal,callback:function(t){e.privateKeyVal=t},expression:"privateKeyVal"}}),e._v(" "),r("public-tips",{directives:[{name:"show",rawName:"v-show",value:e.privateKeyError,expression:"privateKeyError"}],attrs:{tipsTxt:e.privateKeyErrorTxt}}),e._v(" "),r("public-button",{staticClass:"private-key-btn",class:e.privateKeyActive?"btn-active":"",attrs:{disabled:!e.privateKeyActive,text:e.$t(e.keyUnlockBtn)},nativeOn:{click:function(t){return e.walletInfoForm(t)}}})],1)])],1),e._v(" "),r("content-footer"),e._v(" "),r("wallet-transparent",{directives:[{name:"show",rawName:"v-show",value:e.transparentShow,expression:"transparentShow"}],attrs:{txt:e.systemErrorTxt}})],1)},staticRenderFns:[]};var s=function(e){r("X16G")},i=r("VU/8")(n.a,a,!1,s,"data-v-1003b59c",null);t.a=i.exports},OQF6:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAANNJREFUOI3l0L8OwWAUhvHnozSR2CTEZlEuwmywG8RgqkXDJVhcQf1JiN3GDRgkwi20i9EmMRkkHEMJRYeO4t1OTn5vcg78YVwzhdsqPMZIaCz6GmHJ3kwAaKExGIiyyI5PACo8xqJo9x8rr0DMGK4+BbYU7JEP79ppztcVSB6lmhj25HX9/IFIBhjiWB0/vmzuuPGO/SeIGcPR5ygqID3iUdvD5FBSwxjMvl3n/4F0NZzDwivhCJJEST0Ifxa8lkCZyLWKMZgH4eBIV8O1SuHhT+YG2X9KvNNNClEAAAAASUVORK5CYII="},X16G:function(e,t){},al3Q:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("Xxa5"),a=r.n(n),s=r("exGp"),i=r.n(s),o=r("Dd8w"),l=r.n(o),c=r("EgER"),u=r("OQF6"),d=r.n(u),h={name:"transferAccountsCheck",props:{tradingMoney:String},components:{publicInput:function(){return r.e(13).then(r.bind(null,"a1zZ"))},publicTips:function(){return r.e(9).then(r.bind(null,"fSaJ"))}},computed:{amountBiut:function(){return this.$store.getters.availibleAmount},amountBiu:function(){return this.$store.getters.walletMoneyN}},data:function(){return{imgUrl:d.a,moneyTxt:"transfer.transferMoney",moneyShow:!1,walletMoney:"",transferListShow:!1,transferCurrency:"BIUT",transferIdx:0,itemList:[{id:"01",cnt:"BIUT"},{id:"02",cnt:"BIU"}]}},methods:{clearAmount:function(){var e=this;this.$nextTick(function(){e.walletMoney=e.walletMoney.replace(/[^\d.]/g,""),e.walletMoney=e.walletMoney.replace(/\.{2,}/g,"."),e.walletMoney=e.walletMoney.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e.walletMoney=e.walletMoney.replace(/^(\-)*(\d+)\.(\d\d\d\d\d\d\d\d).*$/,"$1$2.$3")}),String(this.walletMoney.length)>10&&this.walletMoney.indexOf(".")<0&&this.$nextTick(function(){e.walletMoney=String(e.walletMoney).substring(0,10)}),0==this.walletMoney.indexOf(".")&&this.$nextTick(function(){e.walletMoney=String(e.walletMoney).substring(0,9)})},allTranferMoney:function(){0==this.transferIdx?this.walletMoney=this.getPointNum(this.amountBiut):this.tradingMoney<=0?this.walletMoney=this.getPointNum(this.amountBiu):this.walletMoney=this.tradingMoney},openTransferList:function(){this.transferListShow=!this.transferListShow},tabTransfer:function(e,t){this.walletMoney="",this.transferIdx=e,this.transferCurrency=t,this.transferListShow=!1},clearIpt:function(){this.walletMoney=""}},watch:{walletMoney:function(e,t){var r={amount:e,idx:this.transferIdx};this.$emit("getAmount",r);var n=e.length>0&&Number(e)>Number(this.amountBiut)&&0===this.transferIdx,a=e.length>0&&Number(e)>Number(this.tradingMoney)&&1===this.transferIdx;this.moneyShow=!(!n&&!a)}}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("section",{staticClass:"trading-list"},[n("p",[e._v(e._s(e.$t("transfer.transferNumber"))+" "),n("label",[e._v("*")])]),e._v(" "),n("span",[n("public-tips",{directives:[{name:"show",rawName:"v-show",value:e.moneyShow,expression:"moneyShow"}],attrs:{tipsTxt:e.moneyTxt}})],1)]),e._v(" "),n("section",{staticClass:"money-arr"},[n("public-input",{attrs:{maxlength:"19",placeholder:e.$t("transfer.transferNumber")},on:{input:e.clearAmount},model:{value:e.walletMoney,callback:function(t){e.walletMoney=t},expression:"walletMoney"}}),e._v(" "),n("section",[n("span",{attrs:{id:"amountListImg"},on:{click:e.openTransferList}},[e._v("\n        "+e._s(e.transferCurrency)+"\n        "),n("img",{attrs:{src:r("4nlc")}})]),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.transferListShow,expression:"transferListShow"}]},e._l(e.itemList,function(t,r){return n("li",{key:r,class:e.transferIdx==r?"list-active":"",on:{click:function(n){return e.tabTransfer(r,t.cnt)}}},[n("span",[e._v(e._s(t.cnt))]),e._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:e.transferIdx==r,expression:"transferIdx == index"}],attrs:{src:e.transferIdx==r?""+e.imgUrl:""}})])}),0)])],1),e._v(" "),n("section",{staticClass:"money-list"},[n("span",[e._v(e._s(e.$t("transfer.balance"))+"：")]),e._v(" "),n("label",[e._v(e._s(0==e.transferIdx?e.getPointNum(e.amountBiut):e.getPointNum(e.amountBiu)))]),e._v(" "),n("span",[e._v(e._s(e.transferCurrency))]),e._v(" "),n("span",{on:{click:e.allTranferMoney}},[e._v(e._s(e.$t("transfer.all")))])])])},staticRenderFns:[]};var f=r("VU/8")(h,p,!1,function(e){r("n3wN")},"data-v-7860efd2",null).exports,v=r("NYxO"),w=(r("4PV6"),{name:"transferAccounts",components:{contentFooter:function(){return r.e(10).then(r.bind(null,"4LSl"))},walletEntren:c.a,publicButton:function(){return r.e(11).then(r.bind(null,"NPxM"))},transferMask:function(){return r.e(16).then(r.bind(null,"N1l/"))},inputList:function(){return r.e(14).then(r.bind(null,"NCbv"))},transferSlider:function(){return r.e(25).then(r.bind(null,"+c3h"))},transferCheck:f},props:{},data:function(){return{tradingPages:1,maskShow:!1,tradingMoney:"0.02",walletAddress:"",walletMoney:"",feeVal:.02,transferIdx:0,addressTxt:"transfer.transferAddressError",addressError:!1}},computed:l()({loginStatus:function(){return this.$store.getters.isLogin},address:function(){return"0x"+this.$store.getters.walletAddress},allMoneyN:function(){var e=this.cal.accSub(this.$store.getters.walletMoneyN,.02);return this.tradingMoney=String(this.getPointNum(e)),this.$store.getters.walletMoneyN}},Object(v.b)({allMoneyC:"availibleAmount",privateKey:"walletKey",nonce:"nonce",wallet:"wallet"}),{tradingInfo:function(){return[{fromAddress:this.address,toAddress:this.walletAddress,privateKey:this.privateKey,transferType:this.transferIdx,transferAmount:this.walletMoney,transferFee:this.feeVal,nonce:this.nonce}]},transferActive:function(){var e=this.walletAddress.replace(/\s+/g,"");return e.length>0&&e.length<42?(this.addressError=!0,this.addressTxt="transfer.transferAddressError",!1):_const.addressReg.test(e)||42!=e.length?_const.addressReg.test(e)&&e==this.address?(this.addressError=!0,this.addressTxt="transfer.transferAddressError2",!1):(this.addressError=!1,0===this.transferIdx?!!(42==e.length&&Number(this.walletMoney.toString().replace(",",""))>0&&e!=this.address&&Number(this.walletMoney.toString().replace(",",""))<=Number(this.allMoneyC.toString().replace(",",""))&&_const.addressReg.test(e)&&Number(this.feeVal)<=Number(this.allMoneyN)):!!(42==e.length&&Number(this.walletMoney.toString().replace(",",""))>0&&e!=this.address&&Number(this.walletMoney.toString().replace(",",""))<=Number(this.allMoneyN.toString().replace(",",""))&&Number(this.walletMoney.toString().replace(",",""))+Number(this.feeVal.toString().replace(",",""))<=Number(this.allMoneyN.toString().replace(",",""))&&_const.addressReg.test(e))):(this.addressError=!0,this.addressTxt="transfer.transferAddressError",!1)}}),created:function(){},mounted:function(){},destroyed:function(){this.$store.commit("logoff")},methods:{loginWallet:function(e){var t=this;return i()(a.a.mark(function r(){var n;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.tradingPages=2,t.$store.commit("login",e),r.next=4,t.updateWalletBalance(e);case 4:n=r.sent,t.$store.commit("updateWalletBalance",{walletBalance:n.walletBalance,freezeAmount:n.freezeAmount,availibleAmount:n.availibleAmount,walletBalanceSEN:n.walletBalanceSEN,nonce:n.nonce});case 6:case"end":return r.stop()}},r,t)}))()},addressChange:function(e){this.walletAddress=e},getFee:function(e){this.feeVal=e;var t=this.cal.accSub(this.allMoneyN,e);this.tradingMoney=String(this.getPointNum(t))},getAmount:function(e){this.walletMoney=e.amount,this.transferIdx=e.idx},closeAmountList:function(e){var t=document.getElementById("amountListImg");this.transferListShow&&!t.contains(e.target)&&(this.transferListShow=!1)},closeMask:function(e){var t=this;1===e?this.maskShow=!1:(this.$refs.addressModel.clearIpt(),this.$refs.moneyModel.clearIpt(),this.$refs.feeModel.resetSlider(),this.maskShow=!1,this.$nextTick(i()(a.a.mark(function e(){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.updateWalletBalance(t.wallet);case 2:r=e.sent,t.$store.commit("updateWalletBalance",{walletBalance:r.walletBalance,freezeAmount:r.freezeAmount,availibleAmount:r.availibleAmount,walletBalanceSEN:r.walletBalanceSEN,nonce:r.nonce});case 4:case"end":return e.stop()}},e,t)}))))}}}),m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"el-container",on:{click:e.closeAmountList}},[r("wallet-entren",{directives:[{name:"show",rawName:"v-show",value:!e.loginStatus,expression:"!loginStatus"}],on:{login:e.loginWallet}}),e._v(" "),e.loginStatus?r("main",{staticClass:"wallet-background"},[r("section",{staticClass:"transfer-content"},[r("input-list",{ref:"",staticClass:"ipt-m",attrs:{iptTitle:e.$t("transfer.youAddress"),iptPlc:e.$t("transfer.youAddress"),iptRd:!0,iptVal:e.address}}),e._v(" "),r("input-list",{ref:"addressModel",staticClass:"ipt-m",attrs:{iptTitle:e.$t("transfer.transferAdddress"),iptPlc:e.$t("transfer.transferAdddress"),iptLength:42,errorShow:e.addressError,errorTxt:e.addressTxt},on:{change:e.addressChange}}),e._v(" "),r("transfer-check",{ref:"moneyModel",attrs:{amountBiut:e.allMoneyC,amountBiu:e.allMoneyN,tradingMoney:e.tradingMoney},on:{getAmount:e.getAmount}}),e._v(" "),r("transfer-slider",{ref:"feeModel",attrs:{ststs:e.allMoneyN,feeVal:e.feeVal},on:{getFee:e.getFee}}),e._v(" "),r("public-button",{staticClass:"transfer_btn",class:e.transferActive?"btn-active":"",attrs:{disabled:!e.transferActive,text:e.$t("transfer.generateTrading")},nativeOn:{click:function(t){e.maskShow=!0}}})],1),e._v(" "),r("content-footer")],1):e._e(),e._v(" "),r("transfer-mask",{directives:[{name:"show",rawName:"v-show",value:e.maskShow,expression:"maskShow"}],attrs:{maskInfo:e.tradingInfo},on:{close:e.closeMask}})],1)},staticRenderFns:[]};var _=r("VU/8")(w,m,!1,function(e){r("AkFF")},"data-v-61e9b112",null);t.default=_.exports},n3wN:function(e,t){}});